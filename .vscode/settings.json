{
  // ============================================================
  // File Handling
  // ============================================================
  "files.associations": {
    "*.hpp": "cpp",
    "*.cpp": "cpp",
    "*.hpp.in": "cmake",
    "*.h.in": "cmake",
    "*.hh.in": "cmake",
    "*.hxx.in": "cmake",
    "*.in": "cmake"
  },
  "files.trimTrailingWhitespace": true,
  "files.insertFinalNewline": true,
  "files.trimFinalNewlines": true,
  "files.eol": "\n",

  // ============================================================
  // Editor - Visual & Behavior
  // ============================================================
  "editor.rulers": [100],
  "editor.formatOnSave": true,
  "editor.formatOnPaste": false,
  "editor.renderWhitespace": "boundary",
  "editor.bracketPairColorization.enabled": true,
  "editor.guides.bracketPairs": true,
  "editor.stickyScroll.enabled": true,
  "editor.minimap.enabled": false,
  "editor.minimap.maxColumn": 100,
  "editor.cursorBlinking": "smooth",
  "editor.cursorSmoothCaretAnimation": "on",
  "editor.smoothScrolling": true,
  "editor.mouseWheelZoom": true,
  "editor.linkedEditing": true,
  "editor.inlineSuggest.enabled": true,
  "editor.suggest.preview": true,
  "editor.suggest.showStatusBar": true,
  "editor.acceptSuggestionOnEnter": "on",

  // ============================================================
  // C++ / Clangd Configuration
  // ============================================================
  // Disable C/C++ extension IntelliSense (we use clangd)
  "C_Cpp.intelliSenseEngine": "disabled",
  "C_Cpp.files.exclude": {
    "**/*.in": true
  },

  // Clangd LSP
  "clangd.path": "clangd",
  "clangd.arguments": [
    "--compile-commands-dir=${workspaceFolder}",
    "--background-index",
    "--clang-tidy",
    "--completion-style=detailed",
    "--header-insertion=iwyu",
    "--header-insertion-decorators",
    "--all-scopes-completion",
    "--pch-storage=memory"
  ],
  "clangd.onConfigChanged": "restart",

  // Code formatting (C++)
  "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd",
  "[cpp]": {
    "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd",
    "editor.tabSize": 2,
    "editor.insertSpaces": true
  },
  "[c]": {
    "editor.defaultFormatter": "llvm-vs-code-extensions.vscode-clangd"
  },

  // ============================================================
  // CMake Configuration
  // ============================================================
  "cmake.configureOnOpen": false,
  "cmake.cmakePath": "cmake",
  "cmake.buildDirectory": "${workspaceFolder}/build/${buildPreset}",
  "cmake.statusbar.advanced": {
    "build": {
      "visibility": "visible"
    },
    "launch": {
      "visibility": "visible"
    },
    "debug": {
      "visibility": "visible"
    }
  },

  // ============================================================
  // Testing
  // ============================================================
  "testExplorer.useNativeTesting": true,
  "testExplorer.onStart": "clearOutput",

  // ============================================================
  // Terminal
  // ============================================================
  "terminal.integrated.smoothScrolling": true,
  "terminal.integrated.cursorBlinking": true,
  "terminal.integrated.fontSize": 13,
  "terminal.integrated.scrollback": 10000,

  // ============================================================
  // Git & Version Control
  // ============================================================
  "git.autofetch": true,
  "git.confirmSync": false,
  "git.enableSmartCommit": true,
  "git.suggestSmartCommit": false,
  "gitlens.codeLens.enabled": false,
  "gitlens.currentLine.enabled": true,
  "gitlens.hovers.currentLine.over": "line",

  // ============================================================
  // Search & Explorer
  // ============================================================
  "search.exclude": {
    "**/build": true,
    "**/vcpkg_installed": true,
    "**/.cache": true,
    "**/compile_commands.json": true
  },
  "files.exclude": {
    "**/.git": true,
    "**/.cache": true
  },
  "explorer.confirmDelete": false,
  "explorer.confirmDragAndDrop": false,

  // ============================================================
  // Error Lens (Inline Error Display)
  // ============================================================
  "errorLens.enabled": true,
  "errorLens.enabledDiagnosticLevels": ["error", "warning", "info"],
  "errorLens.followCursor": "activeLine",
  "errorLens.gutterIconsEnabled": true,

  // ============================================================
  // Spell Checker
  // ============================================================
  "cSpell.enabled": true,
  "cSpell.language": "en",
  "cSpell.enableFiletypes": [
    "cpp",
    "markdown",
    "cmake"
  ],
  "cSpell.words": [
    "clangd",
    "vcpkg",
    "devbox",
    "lifec",
    "asan",
    "ubsan",
    "doctest"
  ],

  // ============================================================
  // Todo Highlight
  // ============================================================
  "todohighlight.keywords": [
    {
      "text": "TODO:",
      "color": "#fff",
      "backgroundColor": "#ffbd2a",
      "overviewRulerColor": "rgba(255,189,42,0.8)"
    },
    {
      "text": "FIXME:",
      "color": "#fff",
      "backgroundColor": "#f06292",
      "overviewRulerColor": "rgba(240,98,146,0.8)"
    },
    {
      "text": "NOTE:",
      "color": "#fff",
      "backgroundColor": "#64b5f6",
      "overviewRulerColor": "rgba(100,181,246,0.8)"
    }
  ],

  // ============================================================
  // Workbench & UI
  // ============================================================
  "workbench.colorTheme": "Default Dark Modern",
  "workbench.iconTheme": "material-icon-theme",
  "workbench.list.smoothScrolling": true,
  "workbench.editor.enablePreview": false,
  "workbench.editor.closeOnFileDelete": true,
  "breadcrumbs.enabled": true
}
